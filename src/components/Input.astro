---
import type { HTMLAttributes } from "astro/types";

interface Props extends HTMLAttributes<"input"> {
  errorText?: string;
  helpText?: string;
}

const { class: className, helpText, errorText, ...props } = Astro.props;
---

<input
  class:list={[className]}
  {...props}
/>

<script>
  import autoAnimate from '@formkit/auto-animate';

  document.querySelectorAll<HTMLDivElement>('.messages').forEach(() => autoAnimate);
</script>

<style>
  input {
    inline-size: 100%;
    padding: 0.5rem 1rem;
    border: 1px solid gray;
    border-radius: 0.25rem;

    &:focus-visible {
      border: 1px solid transparent;
      outline: 2px solid var(--clr-primary);
    }

    &:invalid {
      border: 1px solid red;

      &:focus-visible {
        outline: 2px solid red;
      }
    }
  }

  p {
    font-size: 0.875rem;

    &[role=alert] {
      color: red;
    }
  }
</style>
